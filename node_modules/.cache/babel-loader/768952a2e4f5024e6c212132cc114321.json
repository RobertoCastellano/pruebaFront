{"ast":null,"code":"import axios from 'axios'; // CONSTANTES\n\nconst dataInicial = {\n  count: 0,\n  next: null,\n  previous: null,\n  results: []\n}; // TYPES\n\nconst GET_ITEMS = 'GET ITEMS';\nconst NEXT_ITEMS = 'NEXT ITEMS';\nconst INFO_ITEMS = 'INFO ITEMS'; // REDUCER \n\nexport default function apiReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : dataInicial;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case GET_ITEMS:\n      return { ...state,\n        ...action.payload\n      };\n\n    case NEXT_ITEMS:\n      return { ...state,\n        ...action.payload\n      };\n\n    case INFO_ITEMS:\n      return { ...state,\n        unPokemon: action.payload\n      };\n\n    default:\n      return state;\n  }\n} // ACCIONES\n\nexport const pokeInfoAction = function () {\n  let url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'https://pokeapi.co/api/v2/pokemon/1/';\n  return async dispatch => {\n    if (localStorage.getItem(url)) {\n      dispatch({\n        type: INFO_ITEMS,\n        payload: JSON.parse(localStorage.getItem(url))\n      });\n      console.log('Desde localStorage');\n      return;\n    }\n\n    try {\n      const res = await axios.get(url);\n      console.log('Desde API');\n      console.log(res.data);\n      dispatch({\n        type: INFO_ITEMS,\n        payload: {\n          nombre: res.data.name,\n          ancho: res.data.weight,\n          alto: res.data.height,\n          imagen: res.data.sprites.front_default\n        }\n      });\n      localStorage.setItem(url, JSON.stringify({\n        nombre: res.data.name,\n        ancho: res.data.weight,\n        alto: res.data.height,\n        imagen: res.data.sprites.front_default\n      }));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\nexport const getItemsAction = () => async dispatch => {\n  if (localStorage.getItem('offset=0')) {\n    console.log('Datos locales');\n    dispatch({\n      type: GET_ITEMS,\n      payload: JSON.parse(localStorage.getItem('offset=0'))\n    });\n    return;\n  }\n\n  try {\n    const res = await axios.get(`https://pokeapi.co/api/v2/pokemon?limit=10&offset=0`);\n    console.log('Datos API');\n    dispatch({\n      type: GET_ITEMS,\n      payload: res.data\n    });\n    localStorage.setItem('offset=0', JSON.stringify(res.data));\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const nextItemAction = () => async (dispatch, getState) => {\n  const {\n    next\n  } = getState().items;\n\n  if (localStorage.getItem(next)) {\n    console.log('Datos locales');\n    dispatch({\n      type: GET_ITEMS,\n      payload: JSON.parse(localStorage.getItem(next))\n    });\n    return;\n  }\n\n  try {\n    const res = await axios.get(next);\n    console.log('Datos API');\n    dispatch({\n      type: NEXT_ITEMS,\n      payload: res.data\n    });\n    localStorage.setItem(next, JSON.stringify(res.data));\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const previousItemAction = () => async (dispatch, getState) => {\n  const {\n    previous\n  } = getState().items;\n\n  if (localStorage.getItem(previous)) {\n    console.log('Datos locales');\n    dispatch({\n      type: GET_ITEMS,\n      payload: JSON.parse(localStorage.getItem(previous))\n    });\n    return;\n  }\n\n  try {\n    const res = await axios.get(previous);\n    console.log('Datos API');\n    dispatch({\n      type: NEXT_ITEMS,\n      payload: res.data\n    });\n    localStorage.setItem(previous, JSON.stringify(res.data));\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"sources":["/Users/robertocastellanomolina/Dropbox/robertodev/dev/uptodown/pruebaFront/src/redux/apiDucks.js"],"names":["axios","dataInicial","count","next","previous","results","GET_ITEMS","NEXT_ITEMS","INFO_ITEMS","apiReducer","state","action","type","payload","unPokemon","pokeInfoAction","url","dispatch","localStorage","getItem","JSON","parse","console","log","res","get","data","nombre","name","ancho","weight","alto","height","imagen","sprites","front_default","setItem","stringify","error","getItemsAction","nextItemAction","getState","items","previousItemAction"],"mappings":"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","sourcesContent":["import axios from 'axios';\n\n// CONSTANTES\n\nconst dataInicial={\n\tcount : 0,\n\tnext : null,\n\tprevious : null,\n\tresults : []\n}\n\n// TYPES\n\nconst GET_ITEMS = 'GET ITEMS'\nconst NEXT_ITEMS = 'NEXT ITEMS'\nconst INFO_ITEMS = 'INFO ITEMS'\n\n\n// REDUCER \n\nexport default function apiReducer(state = dataInicial, action){\n\tswitch (action.type) {\n\t\tcase GET_ITEMS:\n\t\t\treturn {...state, ...action.payload}\n\t\tcase NEXT_ITEMS:\n\t\t\treturn {...state, ...action.payload}\n\t\tcase INFO_ITEMS:\n\t\t\treturn {...state, unPokemon: action.payload}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\n// ACCIONES\n\nexport const pokeInfoAction = (url='https://pokeapi.co/api/v2/pokemon/1/')=> async(dispatch)=> {\n\n\tif (localStorage.getItem(url)){\n\t\tdispatch({\n\t\t\ttype: INFO_ITEMS,\n\t\t\tpayload: JSON.parse(localStorage.getItem(url))\n\t\t})\n\t\tconsole.log('Desde localStorage')\n\t\treturn\n\t}\n\n\ttry {\n\t\tconst res= await axios.get(url)\n\t\tconsole.log('Desde API')\n\t\tconsole.log(res.data)\n\t\tdispatch({\n\t\t\ttype: INFO_ITEMS,\n\t\t\tpayload: {\n\t\t\t\tnombre: res.data.name,\n\t\t\t\tancho: res.data.weight,\n\t\t\t\talto: res.data.height,\n\t\t\t\timagen: res.data.sprites.front_default\n\t\t\t}\n\t\t})\n\t\tlocalStorage.setItem(url, JSON.stringify({\n\t\t\tnombre: res.data.name,\n\t\t\tancho: res.data.weight,\n\t\t\talto: res.data.height,\n\t\t\timagen: res.data.sprites.front_default\n\t\t}))\n\t\t\n\t} catch (error) {\n\t\tconsole.log(error)\t\n\t}\n}\n\n\n\n\nexport const getItemsAction = ()=> async (dispatch)=> {\n\n\tif (localStorage.getItem('offset=0')) {\n\t\tconsole.log('Datos locales')\n\t\tdispatch({\n\t\t\ttype: GET_ITEMS,\n\t\t\tpayload: JSON.parse(localStorage.getItem('offset=0'))\n\t\t})\n\t\treturn\n\t}\n\n\ttry {\n\t\tconst res = await axios.get(`https://pokeapi.co/api/v2/pokemon?limit=10&offset=0`);\n\t\tconsole.log('Datos API')\n\t\tdispatch({\n\t\t\ttype: GET_ITEMS,\n\t\t\tpayload: res.data\n\t\t})\n\t\tlocalStorage.setItem('offset=0', JSON.stringify(res.data))\t\n\t} catch (error) {\n\t\tconsole.log(error)\t\t\n\t}\n}\n\nexport const nextItemAction = ()=> async (dispatch, getState)=> {\n\n\tconst {next} = getState().items\n\n\tif (localStorage.getItem(next)) {\n\t\tconsole.log('Datos locales')\n\t\tdispatch({\n\t\t\ttype: GET_ITEMS,\n\t\t\tpayload: JSON.parse(localStorage.getItem(next))\n\t\t})\n\t\treturn\n\t}\n\n\ttry {\n\t\tconst res = await axios.get(next)\n\t\tconsole.log('Datos API')\n\t\tdispatch({\n\t\t\ttype: NEXT_ITEMS,\n\t\t\tpayload: res.data\n\t\t})\n\t\tlocalStorage.setItem(next, JSON.stringify(res.data))\t\t\n\t} catch (error) {\n\t\tconsole.log(error)\n\t\t\n\t}\n}\n\nexport const previousItemAction = ()=> async (dispatch, getState)=>{\n\n\tconst {previous} = getState().items\n\n\tif (localStorage.getItem(previous)) {\n\t\tconsole.log('Datos locales')\n\t\tdispatch({\n\t\t\ttype: GET_ITEMS,\n\t\t\tpayload: JSON.parse(localStorage.getItem(previous))\n\t\t})\n\t\treturn\n\t}\n\n\ttry {\n\t\tconst res = await axios.get(previous)\n\t\tconsole.log('Datos API')\n\t\tdispatch({\n\t\t\ttype: NEXT_ITEMS,\n\t\t\tpayload: res.data\n\t\t})\n\t\tlocalStorage.setItem(previous, JSON.stringify(res.data))\t\t\t\t\n\t} catch (error) {\n\t\tconsole.log(error)\n\t\t\n\t}\n\n}"]},"metadata":{},"sourceType":"module"}